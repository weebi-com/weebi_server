syntax = "proto3";

package weebi.article.service;

import "article/article.proto";
import "article/category.proto";
import "common/g_common.proto";


service ArticleService {
  rpc createOne (ArticleRequest) returns (google.retail.common.StatusResponse);
  rpc readOne (FindArticleRequest) returns (weebi.article.CalibrePb);
  rpc readAll (ReadAllRequest) returns  (ArticlesResponse);
  rpc updateOne (ArticleRequest) returns (google.retail.common.StatusResponse);
  rpc deleteOne (ArticleRequest) returns (google.retail.common.StatusResponse);

  // category
  rpc createOneCategory (CategoryRequest) returns (google.retail.common.StatusResponse);
  // TODO : do a createMany
  
  rpc readOneCategory (FindCategoryRequest) returns (weebi.category.CategoryPb);
  rpc readAllCategories (ReadCategoriesRequest) returns  (CategoriesResponse);
  rpc updateOneCategory (CategoryRequest) returns (google.retail.common.StatusResponse);
  rpc deleteOneCategory (CategoryRequest) returns (google.retail.common.StatusResponse);
}

message FindArticleRequest {
  string chainId = 1;
  string title = 2 [json_name = 'title'];
}

message ReadAllRequest {
  string chainId = 1;
}

message ArticleRequest {
  // below in case mutiple chains, permission check will still be applied to verify 
  string chainId = 1; 
  weebi.article.CalibrePb calibre = 2;
}

message ArticlesResponse {
  repeated weebi.article.CalibrePb calibres = 1;
}

message FindCategoryRequest {
  string chainId = 1;
  string title = 2 ;
}


/// categories
message ReadCategoriesRequest {
  string chainId = 1;
}

message CategoryRequest {
  // below in case mutiple chains, permission check will still be applied to verify 
  string chainId = 1; 
  weebi.category.CategoryPb category = 2;
}

message CategoriesResponse {
  repeated weebi.category.CategoryPb categories = 1;
}
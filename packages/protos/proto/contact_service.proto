syntax = "proto3";

package weebi.contact.service;

import "contact.proto";

import "common/address.proto";
import "common/phone.proto";
import "common/g_common.proto";

message FindContactRequest {
  // string firmOid = 1 [json_name = 'firmOid']; // deduced from bearer token
  string contactChainOid = 1 [json_name = 'contactChainOid'];
  string contactUserOid = 2 [json_name = 'contactUserOid'];
  int32 contactNonUniqueId = 3 [json_name = 'contactNonUniqueId'];
  optional string firstName =  4 [json_name = 'firstName'];
  optional string lastName =  5 [json_name = 'lastName'];
  optional string mail =  6 [json_name = 'mail'];
  optional weebi.common.phone.Phone phone =  7 [json_name = 'phone'];
  optional weebi.common.address.Address address = 8 [json_name = 'addressFull'];
}

message ReadAllContactsRequest {
  string firmOid = 1 [json_name = 'firmOid'];
  string chainOid = 2 [json_name = 'chainOid'];;
}

message ContactRequest {
  string chainOid = 1;
  string contactUserOid = 2;
  weebi.contact.ContactPb contact = 3;
}

message ContactsResponse {
  repeated weebi.contact.ContactPb contacts = 1;
}

service ContactService {
  rpc readAll (ReadAllContactsRequest) returns  (ContactsResponse);
  rpc readOne (FindContactRequest) returns (weebi.contact.ContactPb);
  rpc createOne (ContactRequest) returns (google.retail.common.StatusResponse);
  rpc replaceOne (ContactRequest) returns (google.retail.common.StatusResponse);
  rpc deleteOne (ContactRequest) returns (google.retail.common.StatusResponse);
}
syntax = "proto3";

package weebi.user_permissions;

import "user.proto";
// import "common/mongo.proto";

// ! any addition in this object must also be echoed in _readUserPermissions in user_service_base.dart
/// Permission encompass two notions : access (in the boutiques hierarchy), rights (CRUD on editable objects and bool on certain action/screen in app)

/// boutiquesAccessible != user.boutiquesOids
/// boutiquesAccessible encompass all boutiques access
/// while user.boutiquesOids == 'ALL' if user manages muliple chains  
/// As boutiques get created in the chain NO NEED to update each user that has access to this chain to add boutique 
/// if user is admin / on chain level, then user.boutiquesOids will be empty
/// name pattern changed here as a reminder

/// if user is simple seller / cashier
/// user.chainOids = ['mall1']
/// user.boutiquesOids = ['boutique1A']
///   =>
///   userPermission.chainsAccessible = ['mall1'] chainOid where the boutique belongs 
///   userPermission.boutiquesAccessible = ['boutique1A'] 
/// if user is admin
/// user.chainOids = ['mall1', 'mall2']
/// user.boutiquesOids = []
/// =>
///   userPermission.chainsAccessible = ['mall1', 'mall2']
///   userPermission.boutiquesAccessible = ['boutique1A', 'boutique1B', 'boutique2A']



message UserPermissions {
  string userOid = 1 [json_name = 'userOid'];
  string firmOid = 2  [json_name = 'firmOid'];
  weebi.user.Oids chainsAccessible = 3 [json_name = 'chainsAccessible'];
  weebi.user.Oids boutiquesAccessible = 4 [json_name = 'boutiquesAccessible']; 
  weebi.user.TicketRights ticketRights = 5  [json_name = 'ticketRights'];
  weebi.user.ContactRights contactRights =  6  [json_name = 'contactRights'];
  weebi.user.ArticleRights articleRights =  7 [json_name = 'articleRights'];
  weebi.user.BoutiqueRights boutiqueRights = 8  [json_name = 'boutiqueRights'];
  weebi.user.MallRights chainRights =  9 [json_name = 'mallRights'];
  weebi.user.FirmRights firmRights =  10  [json_name = 'firmRights'];
  weebi.user.UserManagementRights userManagementRights =  11 [json_name = 'userManagementRights'];
  weebi.user.BoolRights boolRights = 12 [json_name = 'boolRights'];
}

